#Java #Data 
#### Класс Date ####

2023-12-11 16:26

Класс Date хранит время в миллисекундах начиная с 1 января 1970 года. Данный класс имеет конструктор по умолчанию, который возвращает текущее время. Кроме этого можно создать объект Date используя конструктор, который принимает количество миллисекунд начиная с 1 января 1970 года. Для получения этого внутреннего времени используется метод getTime(). Кроме этого уже после создания экземпляра класса можно изменить время с помощью setTime(long date).

Конструкторы класса Date :
- Date()
- Date(long milliseconds)

Первый конструктор без параметров инициализирует объект текущей датой и временем. Во втором конструкторе можно указать количество миллисекунд, прошедших с полуночи 1 января 1970 года.

Методы класса **Date:**
- boolean after(Date date) - если объект содержит более позднюю дату, чем указано в параметре date, то возвращается true;
- boolean before(Date date) - если объект содержит более раннюю дату, чем указано в параметре date, то возвращается true;
- int compareTo(Date date) - сравнивает даты. Возвращает 0, если совпадают, отрицательное значение - если вызывающая дата более ранняя, положительное значение - если вызывающая дата более поздняя, чем в параметре;
- boolean equals(Object object) - если даты совпадают, то возвращается true;
- long getTime() - возвращает количество миллисекунд, прошедших с полуночи 1 января 1970 года;
- void setTime(long milliseconds) - устанавливает время и дату в виде числа миллисекунд, прошедших с полночи 1 января 1970 года.

Простой пример использования Date для вывода даты в консоль.
```java
Date date = new Date();
System.out.println(date.toString());
```
С помощью метода getTime() можно отобразить количество миллисекунд, прошедших с 1 января 1970 года.
```java
Date date = new Date();

long millis = date.getTime();
System.out.println(String.valueOf(millis));
```
#### Форматирование даты с помощью класса SimpleDateFormat ####
```java
package ru.test;

import java.util.Date;
import java.text.SimpleDateFormat;

public class Test
{
    public void test()
    {
        Date d = new Date();
        SimpleDateFormat format1;
        SimpleDateFormat format2;
        format1 = new SimpleDateFormat(
                        "dd.MM.yyyy hh:mm");
        format2 = new SimpleDateFormat(
                  "День dd Месяц MM Год yyyy Время hh:mm");
        System.out.println(
             format1.format(d)  // 25.02.2013 09:03
        );
        System.out.println(
             format2.format(d)
             // День 25 Месяц 02 Год 2013 Время 09:03
        );
    }
}
```
Для того чтобы задать в Java формат даты и времени, используйте строковый шаблон (регулярные выражения) с датой и временем. В этой модели все буквы ASCII зарезервированы как шаблон письма, которые определяются следующим образом:

|   |   |   |
|---|---|---|
|Символ|Описание|Пример|
|G|Обозначение эры|н.э.|
|y|Год из четырех цифр|2016|
|M|Номер месяца года|11|
|d|Число месяца|13|
|h|Формат часа в A.M./P.M.(1~12)|7|
|H|Формат часа(0~23)|19|
|m|Минуты|30|
|s|Секунды|45|
|S|Миллисекунды|511|
|E|День недели|Вс|
|D|Номер дня в году|318|
|F|Номер дня недели в месяце|2 (второе воскресение в этом месяце)|
|w|Номер неделя в году|46|
|W|Номер недели в месяце|2|
|a|Маркер A.M./P.M.|AM|
|k|Формат часа(1~24)|24|
|K|Формат часа в A.M./P.M.(0~11)|0|
|z|Часовой пояс|FET (Дальневосточноевропейское время)|
|'|Выделение для текста|Текст|
|''|Одинарная кавычка|'|

При создании шаблона представления даты **SimpleDateFormat** использовались следующие параметры :
- dd — означает день;
- MM — месяц;
- yyyy — год;
- hh — часы;
- mm — минуты;

В качестве разделитель можно использовать любой текст.

Класс **SimpleDateFormat** является подклассом класса **DateFormat** и позволяет определять собственные шаблоны форматирования для отображения даты и времени.

Символы форматирования строки

- A - AM или PM
- d - день месяца (1-31)
- D - день в году (1-366)
- H - часы в формате AM/PM (1-12)
- K - часы в формате суток (1-24)
- M - минуты (0-59)
- S - секунды (0-59)
- W - неделя в году (1-53)
- y - год
- z - часовой пояс

Количество повторений символа определяет способ представления даты. Например, можно указать **hh:mm:ss**, а можно **h:m:s**. В первом случае при необходимости для чисел 0..9 будет отображаться ноль перед цифрой.
#### Форматирование даты с помощью printf ####

Формат даты и времени можно сделать без труда с помощью метода printf. Вы используете формат двух букв, начиная с t и заканчивая одним из символов в таблице, приведенных ниже. Например:
```java
import java.util.Date;

public class Test {
   public static void main(String args[]) {
      // Инициализация объекта date
      Date date = new Date();
      // Вывод текущей даты и времени с использованием toString()
      String str = String.format("Текущая дата и время: %tc", date);
      System.out.printf(str);
   }
}
```
Получим следующий результат:
<p style="background-color: navy; color: yellow">Текущая дата и время: Вс ноя 13 00:55:59 FET 2016</p>
Индекс должен непосредственно следовать за % и завершаться $. Например:
```java
import java.util.Date;

public class Test {
    public static void main(String args[]) {
      // Инициализация объекта date
      Date date = new Date();
        
      // Вывод текущей даты с использованием toString()
      System.out.printf("%1$s %2$td %2$tB %2$tY", "Дата:", date);
   }
}
```
Получим следующий результат:
<p style="background-color: navy; color: yellow">Дата: 13 ноября 2016</p>
Кроме того, Вы можете использовать <. Это означает, что тот же самый аргумент должен использоваться снова, как и предыдущие спецификации формата. Например:
```java
import java.util.Date;

public class Test {
   public static void main(String args[]) {
       // Инициализация объекта date
       Date date = new Date();
// Вывод отформатированной даты (удалите знак = ниже из кода, а то у меня конфликтует этот код с html)
       System.out.printf("%s %te %<=tB %<=tY", "Сегодняшняя дата:", date);
   }
}
```
Получим следующий результат:
<p style="background-color: navy; color: yellow">Сегодняшняя дата: 13 ноября 2016</p>
#### Символы преобразования даты и времени ####

В Java вывод даты в нужном формате можно реализовать с помощью следующих символов преобразования:

|   |   |   |
|---|---|---|
|Символ|Описание|Пример|
|c|Текущее время и дата|Вс ноя 13 01:19:27 FET 2016|
|F|Формат даты ISO 8601 (год-месяц-день)|2016-11-13|
|D|Американский формат даты (месяц/день/год)|11/13/16|
|T|24-часовой формат времени|01:26:09|
|r|12-часовой формат времени|01:26:51 AM|
|R|24-часовой формат времени без секунд|01:27|
|Y|Текущий год из четырех цифр (с ведущими нулями)|2016|
|y|Последние две цифры года (с ведущими нулями)|16|
|C|Первые две цифры года (с ведущими нулями)|20|
|B|Полное название месяца|ноября|
|b|Сокращенное название месяца|ноя|
|m|Номер текущего месяца (с ведущими нулями)|11|
|d|Номер текущего дня месяца (с ведущими нулями)|09|
|e|Номер текущего дня месяца (без ведущих нулей)|9|
|A|Полное название текущего дня недели|воскресенье|
|a|Сокращенное название дня недели|Вс|
|j|Количество дней с начала года (с ведущими нулями)|318|
|H|Формат часа (с ведущими нулями), от 00 до 23|01|
|k|Формат часа (без ведущих нулей), от 0 до 23|1|
|I|Формат часа (с ведущими нулями), от 01 до 12|01|
|l|Формат часа (без ведущих нулей), от 1 до 12|1|
|M|Минуты (с ведущими нулями)|38|
|S|Секунды (с ведущими нулями)|50|
|L|Миллисекунды (с ведущими нулями)|382|
|N|Наносекунды (с ведущими нулями)|775000000|
|p (%Tp)|Верхний регистр маркера A.M./P.M.|AM|
|p (%tp)|Нижний регистр маркера A.M./P.M.|am|
|z|Часовое смещение RFC 822 по GMT|+0300|
|Z|Часовой пояс|FET|
|s|Секунды, начиная с 1970-01-01 00:00:00 GMT|1478991147|
|Q|Миллисекунды, начиная с 1970-01-01 00:00:00 GMT|1478991172134|
#### Преобразование строки в дату ####

Класс SimpleDateFormat имеет некоторые дополнительные методы, в частности parse(), который в Java поможет нам перевести строку в дату соответствии с форматом, хранящимся в данном объекте SimpleDateFormat. Например:

```java
import java.util.*;
import java.text.*;
  
public class Test {

   public static void main(String args[]) {
      SimpleDateFormat ft = new SimpleDateFormat ("yyyy-MM-dd"); 
      String str = args.length == 0 ? "2011-11-11" : args[0]; 

      System.out.print("Строка " + str + " распаршена как "); 
      Date parsingDate;
      try {
         parsingDate = ft.parse(str); 
         System.out.println(parsingDate); 
      }catch (ParseException e) { 
         System.out.println("Нераспаршена с помощью " + ft); 
      }
   }
}
```

Получим следующий результат:
<p style="background-color: navy; color: yellow">Строка 2011-11-11 распаршена как Fri Nov 11 00:00:00 FET 2011</p>
#### Задержка по времени ####

Вы можете увеличить или уменьшить время работы программы на любой период времени, от одной миллисекунды до срока службы вашего компьютера. Например, следующая программа будет находиться в режиме ожидания в течение 10 секунд:
```java
import java.util.*;
  
public class Test {
   public static void main(String args[]) {
      try { 
         System.out.println(new Date() + "\n"); 
         Thread.sleep(10000); // Замораживает весь поток на 10 секунд
         System.out.println(new Date() + "\n"); 
      } catch (Exception e) { 
          System.out.println("Получили исключение!"); 
      }
   }
}
```
Получим следующий результат:
<p style="background-color: navy; color: yellow">Sun Nov 13 02:42:16 FET 2016<br>
Sun Nov 13 02:42:26 FET 2016</p>

>Вместо Thread.sleep() рекомендуется использовать TimeUnit(): TimeUnit.NANOSECONDS.sleep(), TimeUnit.MICROSECONDS.sleep(), TimeUnit.MILLISECONDS.sleep(), TimeUnit.SECONDS.sleep(), TimeUnit.MINUTES.sleep(), TimeUnit.HOURS.sleep() или TimeUnit.DAYS.sleep().

#### Время выполнения программы ####

Довольно просто можно узнать время выполнения кода вашей программы с помощью System.currentTimeMillis(). Для этого необходимо в начале программы записать в переменную значение System.currentTimeMillis(), а в конце вычесть из текущего значения System.currentTimeMillis() переменную, записанную вначале. Рассмотрим пример, в котором измерим скорость работы кода программы, которая выводит 10 случайных чисел на экран.
```java
import java.util.*;
  
public class Test {
   public static void main(String args[]) {
      // Начала отсчета
      long start = System.currentTimeMillis();
        
      // Код программы. Получение 10 случайных чисел от 0 до 9 и вывод на экран
      for(int i = 1;i <= 10;i++) {
          System.out.println("Случайное число №" + i + ": " + (int)(Math.random() * 10));
      }

      // Получение и запись в переменную timeWorkCode времени работы программы
      long timeWorkCode = System.currentTimeMillis() - start;  
      // Вывод времени выполнения работы кода на экран
      System.out.println("Скорость выполнения программы: " + timeWorkCode + " миллисекунд");
   }
}
```
Получим следующий результат:
<p style="background-color: navy; color: yellow">Случайное число №1: 0<br>
Случайное число №2: 5<br>
Случайное число №3: 9<br>
Случайное число №4: 9<br>
Случайное число №5: 0<br>
Случайное число №6: 2<br>
Случайное число №7: 0<br>
Случайное число №8: 3<br>
Случайное число №9: 5<br>
Случайное число №10: 9<br>
Скорость выполнения программы: 2 миллисекунд</p>
#### Разница дат в Java ####

Иногда Вам может понадобиться рассчитать разницу между датами, измерить точку во времени в миллисекундах. Поэтому давайте перепишем еще раз пример, находящийся выше:
```java
import java.util.*;

public class Test {

   public static void main(String args[]) {
      try {
         long start = System.currentTimeMillis();
         System.out.println(new Date() + "\n");
         
         Thread.sleep(10000);
         System.out.println(new Date() + "\n");
         
         long end = System.currentTimeMillis();
         long diff = end - start;
         System.out.println("Разница между датами: " + diff + " миллисекунд");
      }catch (Exception e) {
         System.out.println("Получили исключение!");
      }
   }
}
```
Получим следующий результат:
<p style="background-color: navy; color: yellow">Sun Nov 13 03:22:10 FET 2016<br>
Sun Nov 13 03:22:20 FET 2016<br>
Разница между датами: 10081 миллисекунд</p>
#### Количество дней между датами ####

А иногда Вам может понадобиться в Java узнать количество дней, часов, минут и т.п. между датами. Рассмотрим один из способов нахождения дней между двумя датами ниже в примере:
```java
import java.util.*;

public class Test {

   public static void main(String args[]) {
      String date1 = "01.03.2016";
      String date2 = "01.02.2016";
        
      SimpleDateFormat format = new SimpleDateFormat("dd.MM.yyyy");
        
      Date dateOne = null;
      Date dateTwo = null;
        
      try {
          dateOne = format.parse(date1);
          dateTwo = format.parse(date2);
      } catch (Exception e) {
          e.printStackTrace();
      }
      // Количество дней между датами в миллисекундах
      long difference = dateOne.getTime() - dateTwo.getTime();
      // Перевод количества дней между датами из миллисекунд в дни
      int days =  (int)(difference / (24 * 60 * 60 * 1000)); // миллисекунды / (24ч * 60мин * 60сек * 1000мс)
      // Вывод разницы между датами в днях на экран
      System.out.println(days + " дн.");
   }
}
```
Получим следующий результат:
<p style="background-color: navy; color: yellow">29 дн.</p>

