#java #GUI #Swing 

## Библиотека Swing

2024-05-07 10:58

### Java AWT

Первой попыткой Sun создать графический интерфейс для Java была библиотека **AWT** (Abstract Window Toolkit) — инструментарий для работы с различными оконными средами. Sun сделал прослойку на Java, которая вызывает методы из библиотек, написанных на С. Библиотечные методы AWT создают и используют графические компоненты операционной среды. С одной стороны, это хорошо, так как программа на Java похожа на остальные программы в рамках одной ОС. Но при запуске ее на другой платформе могут возникнуть различия в размерах компонентов и шрифтов, которые будут портить внешний вид программы.

Чтобы обеспечить мультиплатформенность **AWT** интерфейсы вызовов компонентов были унифицированы, вследствие чего их функциональность получилась немного урезанной. Да и набор компонентов получился довольно небольшой. Так например, в AWT нет таблиц, а в кнопках не поддерживается отображение иконок. Тем не менее пакет **java.awt** входит в Java с самого первого выпуска и его можно использовать для создания графических интерфейсов.

Таким образом, компоненты **AWT** не выполняют никакой "работы". Это просто «Java-оболочка» для элементов управления той операционной системы, на которой они работают. Все запросы к этим компонентам перенаправляются к операционной системе, которая и выполняет всю работу.

Использованные ресурсы **AWT** старается освобождать автоматически. Это немного усложняет архитектуру и влияет на производительность. Написать что-то серьезное с использованием AWT будет несколько затруднительно. Сейчас ее используют разве что для апплетов.

### Java Swing

Swing в Java — это инструментарий графического интерфейса пользователя (GUI), включающий компоненты GUI.

Swing предоставляет богатый выбор виджетов и пакетов для создания изысканных компонентов GUI для Java-приложений.

Swing является частью **Java Foundation Classes** (JFC). **JFC** представляет собой API для программирования GUI на Java, обеспечивающий графический интерфейс пользователя.

Библиотека **Java Swing** построена поверх **Java Abstract Widget Toolkit** (AWT). Можно использовать простые компоненты программирования графического интерфейса Java:
- кнопки;
- метки;
- выпадающие списки;
- текстовые поля и т.д.,

### Иерархия Swing

![[java-Swing.jpg]]

### Контейнерный класс

Любой класс, в котором есть другие компоненты, называется контейнерным классом. Для создания приложений с графическим интерфейсом необходим как минимум один класс контейнеров.

Ниже приведены три типа контейнерных классов:
1. Панель – используется для организации компонентов в окне.
2. Рамка – полностью функционирующее окно со значками и заголовками.
3. Диалог – это как всплывающее окно, но не полностью функциональное, как рамка.

### Разница между AWT и Swing

|                                                       |                                         |
| ----------------------------------------------------- | --------------------------------------- |
| AWT                                                   | SWING                                   |
| - платформо-зависимая                                 | - не зависит                            |
| - не соответствует MVC                                | - соответствует MVC                     |
| - меньше компонентов                                  | - Более мощные компоненты               |
| - Не поддерживает подключаемый внешний вид и ощущение | - Поддержка подключаемого внешнего вида |
| - тяжеловесный                                        | - легкий                                |

**Пример 1.** В примере реализуется простейший GUI непосредственно в главном методе _main_():
```java
import javax.swing.*; // подключаем все средства java Swing
 
public class Program { // класс с методом main()
    public static void main(String[] args) {
        JFrame frame = new JFrame("My First GUI"); 
        // Для окна нужна "рама" - Frame
        // стандартное поведение при закрытии окна - завершение приложения
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setSize(300, 300); // размеры окна
        frame.setLocationRelativeTo(null); // окно - в центре экрана
        JButton button = new JButton("Press"); // Экземпляр класса JButton
        // getContentPane() - клиентская область окна
        frame.getContentPane().add(button); // Добавляем кнопку на Frame
        frame.setVisible(true); // Делаем окно видимым
    }
}
```
Вывод:
![[Ex1-Swing.png]]
После запуска можно увидеть, что кнопка «Press» заполнила всю клиентскую область окна. 
Как это исправить? Для этого служит менеджер компоновки. Он используется для компоновки (или расположения) компонентов GUI Java внутри контейнера. Существует множество менеджеров компоновки, но наиболее часто используемые из них — это **BorderLayout**, который размещает компоненты в пяти областях:
- cверху (NORTH);
- снизу (SOUTH);
- слева (WEST);
- справа (EAST);
- по центру (CENTER).

**Пример 2.** Добавим ещё одну кнопку. Теперь их будет две. Первую переименуем в «Старт», а вторую назовём «Стоп»:
```java
import java.awt.BorderLayout; // подключаем BorderLayout
import javax.swing.*; // подключаем все средства java Swing
 
public class Program { // класс с методом main()
 
    public static void main(String[] args) {
        JFrame frame = new JFrame("My First GUI");
        // добавляем панель
        JPanel buttonsPanel = new JPanel(); 
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setSize(300, 300);
        frame.setLocationRelativeTo(null); // окно в центре экрана
        JButton start = new JButton("Старт");
        JButton stop = new JButton(("Стоп");
        // добавляем кнопки на панель
        buttonsPanel.add(start);
        buttonsPanel.add(stop);
        // размещаем панель на Frame (верхняя часть)
        frame.getContentPane().add(BorderLayout.NORTH, buttonsPanel);
        frame.setVisible(true);
    }
}
```
Вывод:
![[Ex2-Swing.png]]
Таким образом можно создавать нужное количество невидимых панелей и размещать (add) на них необходимое число компонентов.

Пример 3. 
```java
import javax.swing.*;  
  
class SwingDemo {  
    SwingDemo() {  
        JFrame frame = new JFrame("A simple swing program");  
        frame.setSize(275, 100);  
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);  
        JLabel label = new JLabel("Swing");  
        frame.getContentPane().add(label);  
        frame.setVisible(true);  
    }  
    public static void main(String[] args) {  
        SwingUtilities.invokeLater(new Runnable() {  
            public void run() {  
                new SwingDemo();  
            }  
        });  
    }  
}
```
Вывод:
![[Ex3-Swing.png]]
В программе SwingDemo присутствует строка
```java
frame.getContentPane().add(label);
```
В JDK5 и более поздних версиях ее можно заменить на
```java
frame.add(label);
```
В методе main конструктор SwingDemo вызывается с помощью следующего фрагмента кода:
```java
    public static void main(String[] args) {  
        SwingUtilities.invokeLater(new Runnable() {  
            public void run() {  
                new SwingDemo();  
            }  
        });  
    }  
```
Этот фрагмент кода создает объект SwingDemo не в основном потоке приложения, а в потоке обработки событий.

Метод main выполняется в основном потоке событий. Следовательно, в нем нельзя непосредственно создавать объект. Следует сначала создать объект [Runnable](Runnable), выполняемый в потоке обработки событий, а затем предоставить данному объекту возможность создавать окно интерфейса программы.